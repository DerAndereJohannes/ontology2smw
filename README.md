# Ontology to SMW
_**Querying an ontology in order to bring it to import to SMW**_

[Semantic Mediawiki](https://www.semantic-mediawiki.org)(SMW) allows 
[external ontologies to be imported into a Mediawiki (MW) instance](https://www.semantic-mediawiki.org/wiki/Help:Import_vocabulary). 
external ontology's properties and classes can be used inside the MW instance, and produce a RDF exports of 
the wiki pages, which point to IRIs of the imported ontology(s).

The process of importing is simple, but time consuming. Hence making it a perfect candidate for an automated process, 
which can be run at anytime a new version of the ontology is published, hence this python script.

<s>Currently the script works only with [The Academic Event Ontology (AEON)](https://github.com/tibonto/aeon) in the context of the confIDent project,
but seems possible to make it work with any ontology and an instances of SMW. </s>

**In order for the terms of an ontology to be imported to SMW instance they should include the property
`aeon:SMW_datatype` and the appropriate [SMW datatype](https://www.semantic-mediawiki.org/wiki/Help:List_of_datatypes) or Category for Classes**


## Package into distribution package
Test: `python setup.py install`

Create a buuild: `python setup.py sdist bdist_wheel`

Run: `ontology2smw`

<!-- HOW IS THE IMPORT DONE -->

## Run Script:
**Prerequisites:** 

In virtual environment install requirements `pip install -r requirements.txt`

Git add [aeon/confIDent](https://github.com/tibonto/aeon/tree/confIDent) as submodule
`./git_submod_add_aeon.sh`

**Run:**

without writing to pages: `python ./main.py ` 

writing to wiki pages: `python ./main.py --write` 


## To write wiki pages
**wikidetails.yml & wiki write access**
* Ensure user your wiki user account belongs to bot group: see wiki page `Special:UserRights`
* Create a bot password in wiki page: `Special:BotPasswords`
* copy `wikidetails.template.yml` as `wikidetails.yml` and fill in bot name and password:<br/>
    
## Properties from other ontologies
...

## queries with [ARQ](https://jena.apache.org/documentation/query/)
`arq --data=aeon/aeon.ttl   --query=ontology2smw/queries/ontology.rq`

`arq --data=aeon/aeon.ttl   --query=ontology2smw/queries/query_classes.rq`

`arq --data=aeon/aeon.ttl   --query=ontology2smw/queries/query_properties.rq`


# Other Scripts
## confident2wikidata_mapping.py
Script to make a YAML file that holds the mapping of AEON/ConfIDent properties to Wikidata properties, 
by parsing the annotation properties aeon:WikidataLabel and aeon:WikidatURI from the recent ontology TTL.

    :param  source          The URL of the recent aeon ontology (defaults to AEON/ConfIDent branch)
    :param  outfile_path     The file path of the YAML generated by the script